{"ast":null,"code":"import _objectSpread from\"/Users/sebasrios/Documents/React-Course/capstone/crwn-clothing/ecommerce-crown/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/sebasrios/Documents/React-Course/capstone/crwn-clothing/ecommerce-crown/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/sebasrios/Documents/React-Course/capstone/crwn-clothing/ecommerce-crown/node_modules/@babel/runtime/regenerator/index.js\";import{initializeApp}from\"firebase/app\";// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\nimport{getAuth,signInWithRedirect,signInWithPopup,GoogleAuthProvider,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut,onAuthStateChanged}from\"firebase/auth\";import{getFirestore,doc,getDoc,setDoc,collection,writeBatch,query,getDocs}from\"firebase/firestore\";// Your web app's Firebase configuration\nvar firebaseConfig={apiKey:\"AIzaSyDE4KVrtKTRD1ibLQz2MFdA1y5JXaHFp6Q\",authDomain:\"ecommerce-crown-db-b4748.firebaseapp.com\",projectId:\"ecommerce-crown-db-b4748\",storageBucket:\"ecommerce-crown-db-b4748.appspot.com\",messagingSenderId:\"1041666930609\",appId:\"1:1041666930609:web:4e9944df6cfd46efe2ef90\"};// Initialize Firebase\nvar firebaseApp=initializeApp(firebaseConfig);var provider=new GoogleAuthProvider();//select_account --> everytime a user interacts with the page needs to sign-in\nprovider.setCustomParameters({prompt:\"select_account\"});/* Sign-In Options */export var auth=getAuth();/* Sing-In using Google Popup \n  creates the sign-in with popup needs (auth, provider)\n*/export var signInWithGooglePopup=function signInWithGooglePopup(){return signInWithPopup(auth,provider);};/* Sing-In using Google Redirect \n  creates the sign-in with popup needs (auth, provider)\n*/export var signInwithGoogleRedirect=function signInwithGoogleRedirect(){return signInWithRedirect(auth,provider);};/* Database Configuration */export var db=getFirestore();//Use these method to create and populate collections in firebase database\nexport var addColletionAndDocuments=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(collectionKey,objectsToAdd,field){var collectionRef,batch;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:collectionRef=collection(db,collectionKey);batch=writeBatch(db);objectsToAdd.forEach(function(object){var docRef=doc(collectionRef,object.title.toLowerCase());batch.set(docRef,object);});_context.next=5;return batch.commit();case 5:console.log(\"done\");case 6:case\"end\":return _context.stop();}}},_callee);}));return function addColletionAndDocuments(_x,_x2,_x3){return _ref.apply(this,arguments);};}();//get category and documents from firebase database\nexport var getCategoriesAndDocuments=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var collectionRef,q,querySnapshot,categoryMap;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0://grab reference from database with the collection key of 'categories'\ncollectionRef=collection(db,\"categories\");//create a query from that specified collection reference\nq=query(collectionRef);//snapshot help us retrieve data from a category reference\n_context2.next=4;return getDocs(q);case 4:querySnapshot=_context2.sent;categoryMap=querySnapshot.docs.reduce(function(accumulator,docSnapshot){var _docSnapshot$data=docSnapshot.data(),title=_docSnapshot$data.title,items=_docSnapshot$data.items;//grab item from json and change the title to lowercase\naccumulator[title.toLowerCase()]=items;return accumulator;},{});return _context2.abrupt(\"return\",categoryMap);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function getCategoriesAndDocuments(){return _ref2.apply(this,arguments);};}();/* Create User from Sign-In \n  userAuth is the user data grabbed from the Sign-In Popup\n  */export var createUserDocumentFromAuth=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(userAuth){var additionalInformation,userDocRef,userSnapshot,displayName,email,createdAt,_args3=arguments;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:additionalInformation=_args3.length>1&&_args3[1]!==undefined?_args3[1]:{};if(userAuth){_context3.next=3;break;}return _context3.abrupt(\"return\");case 3://Initializing User References with doc(name of getFirestore, collection name, unique ID)\nuserDocRef=doc(db,\"users\",userAuth.uid);//Snapshot help us retrieve data from a user reference\n_context3.next=6;return getDoc(userDocRef);case 6:userSnapshot=_context3.sent;if(userSnapshot.exists()){_context3.next=18;break;}//data grabbed from user data authetication\ndisplayName=userAuth.displayName,email=userAuth.email;createdAt=new Date();_context3.prev=10;_context3.next=13;return setDoc(userDocRef,_objectSpread({displayName:displayName,email:email,createdAt:createdAt},additionalInformation));case 13:_context3.next=18;break;case 15:_context3.prev=15;_context3.t0=_context3[\"catch\"](10);console.log(\"error creating the user\",_context3.t0.message);case 18:return _context3.abrupt(\"return\",userDocRef);case 19:case\"end\":return _context3.stop();}}},_callee3,null,[[10,15]]);}));return function createUserDocumentFromAuth(_x4){return _ref3.apply(this,arguments);};}();/* Create user using email and password*/export var createAuthUserWithEmailAndPassword=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(email,password){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(!email||!password)){_context4.next=2;break;}return _context4.abrupt(\"return\");case 2:_context4.next=4;return createUserWithEmailAndPassword(auth,email,password);case 4:return _context4.abrupt(\"return\",_context4.sent);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function createAuthUserWithEmailAndPassword(_x5,_x6){return _ref4.apply(this,arguments);};}();export var signInAuthUserWithEmailAndPassword=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(email,password){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(!email||!password)){_context5.next=2;break;}return _context5.abrupt(\"return\");case 2:_context5.next=4;return signInWithEmailAndPassword(auth,email,password);case 4:return _context5.abrupt(\"return\",_context5.sent);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function signInAuthUserWithEmailAndPassword(_x7,_x8){return _ref5.apply(this,arguments);};}();export var signOutUser=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return signOut(auth);case 2:case\"end\":return _context6.stop();}}},_callee6);}));return function signOutUser(){return _ref6.apply(this,arguments);};}();export var onAuthStateChangedListener=function onAuthStateChangedListener(callback){return onAuthStateChanged(auth,callback);};","map":{"version":3,"names":["initializeApp","getAuth","signInWithRedirect","signInWithPopup","GoogleAuthProvider","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","onAuthStateChanged","getFirestore","doc","getDoc","setDoc","collection","writeBatch","query","getDocs","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firebaseApp","provider","setCustomParameters","prompt","auth","signInWithGooglePopup","signInwithGoogleRedirect","db","addColletionAndDocuments","collectionKey","objectsToAdd","field","collectionRef","batch","forEach","object","docRef","title","toLowerCase","set","commit","console","log","getCategoriesAndDocuments","q","querySnapshot","categoryMap","docs","reduce","accumulator","docSnapshot","data","items","createUserDocumentFromAuth","userAuth","additionalInformation","userDocRef","uid","userSnapshot","exists","displayName","email","createdAt","Date","message","createAuthUserWithEmailAndPassword","password","signInAuthUserWithEmailAndPassword","signOutUser","onAuthStateChangedListener","callback"],"sources":["/Users/sebasrios/Documents/React-Course/capstone/crwn-clothing/ecommerce-crown/src/utils/firebase/firebase.utils.js"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\nimport {\n  getAuth,\n  signInWithRedirect,\n  signInWithPopup,\n  GoogleAuthProvider,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  signOut,\n  onAuthStateChanged,\n} from \"firebase/auth\";\n\nimport {\n  getFirestore,\n  doc,\n  getDoc,\n  setDoc,\n  collection,\n  writeBatch,\n  query,\n  getDocs,\n} from \"firebase/firestore\";\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDE4KVrtKTRD1ibLQz2MFdA1y5JXaHFp6Q\",\n  authDomain: \"ecommerce-crown-db-b4748.firebaseapp.com\",\n  projectId: \"ecommerce-crown-db-b4748\",\n  storageBucket: \"ecommerce-crown-db-b4748.appspot.com\",\n  messagingSenderId: \"1041666930609\",\n  appId: \"1:1041666930609:web:4e9944df6cfd46efe2ef90\",\n};\n\n// Initialize Firebase\nconst firebaseApp = initializeApp(firebaseConfig);\n\nconst provider = new GoogleAuthProvider();\n//select_account --> everytime a user interacts with the page needs to sign-in\nprovider.setCustomParameters({\n  prompt: \"select_account\",\n});\n\n/* Sign-In Options */\nexport const auth = getAuth();\n/* Sing-In using Google Popup \n  creates the sign-in with popup needs (auth, provider)\n*/\nexport const signInWithGooglePopup = () => signInWithPopup(auth, provider);\n\n/* Sing-In using Google Redirect \n  creates the sign-in with popup needs (auth, provider)\n*/\nexport const signInwithGoogleRedirect = () =>\n  signInWithRedirect(auth, provider);\n\n/* Database Configuration */\nexport const db = getFirestore();\n\n//Use these method to create and populate collections in firebase database\nexport const addColletionAndDocuments = async (\n  collectionKey,\n  objectsToAdd,\n  field\n) => {\n  const collectionRef = collection(db, collectionKey);\n  const batch = writeBatch(db);\n\n  objectsToAdd.forEach((object) => {\n    const docRef = doc(collectionRef, object.title.toLowerCase());\n    batch.set(docRef, object);\n  });\n\n  await batch.commit();\n  console.log(\"done\");\n};\n\n//get category and documents from firebase database\nexport const getCategoriesAndDocuments = async () => {\n  //grab reference from database with the collection key of 'categories'\n  const collectionRef = collection(db, \"categories\");\n\n  //create a query from that specified collection reference\n  const q = query(collectionRef);\n\n  //snapshot help us retrieve data from a category reference\n  const querySnapshot = await getDocs(q);\n\n  const categoryMap = querySnapshot.docs.reduce((accumulator, docSnapshot) => {\n    const { title, items } = docSnapshot.data();\n    //grab item from json and change the title to lowercase\n    accumulator[title.toLowerCase()] = items;\n    return accumulator;\n  }, {});\n\n  return categoryMap;\n};\n/* Create User from Sign-In \n  userAuth is the user data grabbed from the Sign-In Popup\n  */\nexport const createUserDocumentFromAuth = async (\n  userAuth,\n  additionalInformation = {}\n) => {\n  if (!userAuth) return;\n  //Initializing User References with doc(name of getFirestore, collection name, unique ID)\n  const userDocRef = doc(db, \"users\", userAuth.uid);\n\n  //Snapshot help us retrieve data from a user reference\n  const userSnapshot = await getDoc(userDocRef);\n\n  //if user does not exist... create user\n  if (!userSnapshot.exists()) {\n    //data grabbed from user data authetication\n    const { displayName, email } = userAuth;\n    const createdAt = new Date();\n\n    try {\n      //create user using setDoc(document reference, {name, email, date created})\n      await setDoc(userDocRef, {\n        displayName,\n        email,\n        createdAt,\n        ...additionalInformation,\n      });\n    } catch (error) {\n      console.log(\"error creating the user\", error.message);\n    }\n  }\n\n  return userDocRef;\n};\n\n/* Create user using email and password*/\nexport const createAuthUserWithEmailAndPassword = async (email, password) => {\n  if (!email || !password) return;\n\n  return await createUserWithEmailAndPassword(auth, email, password);\n};\n\nexport const signInAuthUserWithEmailAndPassword = async (email, password) => {\n  if (!email || !password) return;\n\n  return await signInWithEmailAndPassword(auth, email, password);\n};\n\nexport const signOutUser = async () => {\n  await signOut(auth);\n};\n\nexport const onAuthStateChangedListener = (callback) =>\n  onAuthStateChanged(auth, callback);\n"],"mappings":"8eAAA,OAASA,aAAT,KAA8B,cAA9B,CACA;AACA;AACA,OACEC,OADF,CAEEC,kBAFF,CAGEC,eAHF,CAIEC,kBAJF,CAKEC,8BALF,CAMEC,0BANF,CAOEC,OAPF,CAQEC,kBARF,KASO,eATP,CAWA,OACEC,YADF,CAEEC,GAFF,CAGEC,MAHF,CAIEC,MAJF,CAKEC,UALF,CAMEC,UANF,CAOEC,KAPF,CAQEC,OARF,KASO,oBATP,CAWA;AACA,GAAMC,eAAc,CAAG,CACrBC,MAAM,CAAE,yCADa,CAErBC,UAAU,CAAE,0CAFS,CAGrBC,SAAS,CAAE,0BAHU,CAIrBC,aAAa,CAAE,sCAJM,CAKrBC,iBAAiB,CAAE,eALE,CAMrBC,KAAK,CAAE,4CANc,CAAvB,CASA;AACA,GAAMC,YAAW,CAAGxB,aAAa,CAACiB,cAAD,CAAjC,CAEA,GAAMQ,SAAQ,CAAG,GAAIrB,mBAAJ,EAAjB,CACA;AACAqB,QAAQ,CAACC,mBAAT,CAA6B,CAC3BC,MAAM,CAAE,gBADmB,CAA7B,EAIA,qBACA,MAAO,IAAMC,KAAI,CAAG3B,OAAO,EAApB,CACP;AACA;AACA,EACA,MAAO,IAAM4B,sBAAqB,CAAG,QAAxBA,sBAAwB,SAAM1B,gBAAe,CAACyB,IAAD,CAAOH,QAAP,CAArB,EAA9B,CAEP;AACA;AACA,EACA,MAAO,IAAMK,yBAAwB,CAAG,QAA3BA,yBAA2B,SACtC5B,mBAAkB,CAAC0B,IAAD,CAAOH,QAAP,CADoB,EAAjC,CAGP,4BACA,MAAO,IAAMM,GAAE,CAAGtB,YAAY,EAAvB,CAEP;AACA,MAAO,IAAMuB,yBAAwB,0FAAG,iBACtCC,aADsC,CAEtCC,YAFsC,CAGtCC,KAHsC,0IAKhCC,aALgC,CAKhBvB,UAAU,CAACkB,EAAD,CAAKE,aAAL,CALM,CAMhCI,KANgC,CAMxBvB,UAAU,CAACiB,EAAD,CANc,CAQtCG,YAAY,CAACI,OAAb,CAAqB,SAACC,MAAD,CAAY,CAC/B,GAAMC,OAAM,CAAG9B,GAAG,CAAC0B,aAAD,CAAgBG,MAAM,CAACE,KAAP,CAAaC,WAAb,EAAhB,CAAlB,CACAL,KAAK,CAACM,GAAN,CAAUH,MAAV,CAAkBD,MAAlB,EACD,CAHD,EARsC,sBAahCF,MAAK,CAACO,MAAN,EAbgC,QActCC,OAAO,CAACC,GAAR,CAAY,MAAZ,EAdsC,sDAAH,kBAAxBd,yBAAwB,oDAA9B,CAiBP;AACA,MAAO,IAAMe,0BAAyB,2FAAG,sLACvC;AACMX,aAFiC,CAEjBvB,UAAU,CAACkB,EAAD,CAAK,YAAL,CAFO,CAIvC;AACMiB,CALiC,CAK7BjC,KAAK,CAACqB,aAAD,CALwB,CAOvC;AAPuC,uBAQXpB,QAAO,CAACgC,CAAD,CARI,QAQjCC,aARiC,gBAUjCC,WAViC,CAUnBD,aAAa,CAACE,IAAd,CAAmBC,MAAnB,CAA0B,SAACC,WAAD,CAAcC,WAAd,CAA8B,CAC1E,sBAAyBA,WAAW,CAACC,IAAZ,EAAzB,CAAQd,KAAR,mBAAQA,KAAR,CAAee,KAAf,mBAAeA,KAAf,CACA;AACAH,WAAW,CAACZ,KAAK,CAACC,WAAN,EAAD,CAAX,CAAmCc,KAAnC,CACA,MAAOH,YAAP,CACD,CALmB,CAKjB,EALiB,CAVmB,kCAiBhCH,WAjBgC,0DAAH,kBAAzBH,0BAAyB,2CAA/B,CAmBP;AACA;AACA,IACA,MAAO,IAAMU,2BAA0B,2FAAG,kBACxCC,QADwC,qNAExCC,qBAFwC,kDAEhB,EAFgB,IAInCD,QAJmC,mEAKxC;AACME,UANkC,CAMrBlD,GAAG,CAACqB,EAAD,CAAK,OAAL,CAAc2B,QAAQ,CAACG,GAAvB,CANkB,CAQxC;AARwC,uBASblD,OAAM,CAACiD,UAAD,CATO,QASlCE,YATkC,mBAYnCA,YAAY,CAACC,MAAb,EAZmC,2BAatC;AACQC,WAd8B,CAcPN,QAdO,CAc9BM,WAd8B,CAcjBC,KAdiB,CAcPP,QAdO,CAcjBO,KAdiB,CAehCC,SAfgC,CAepB,GAAIC,KAAJ,EAfoB,2CAmB9BvD,OAAM,CAACgD,UAAD,gBACVI,WAAW,CAAXA,WADU,CAEVC,KAAK,CAALA,KAFU,CAGVC,SAAS,CAATA,SAHU,EAIPP,qBAJO,EAnBwB,+FA0BpCd,OAAO,CAACC,GAAR,CAAY,yBAAZ,CAAuC,aAAMsB,OAA7C,EA1BoC,yCA8BjCR,UA9BiC,0EAAH,kBAA1BH,2BAA0B,8CAAhC,CAiCP,yCACA,MAAO,IAAMY,mCAAkC,2FAAG,kBAAOJ,KAAP,CAAcK,QAAd,2HAC5C,CAACL,KAAD,EAAU,CAACK,QADiC,2FAGnCjE,+BAA8B,CAACuB,IAAD,CAAOqC,KAAP,CAAcK,QAAd,CAHK,iHAAH,kBAAlCD,mCAAkC,kDAAxC,CAMP,MAAO,IAAME,mCAAkC,2FAAG,kBAAON,KAAP,CAAcK,QAAd,2HAC5C,CAACL,KAAD,EAAU,CAACK,QADiC,2FAGnChE,2BAA0B,CAACsB,IAAD,CAAOqC,KAAP,CAAcK,QAAd,CAHS,iHAAH,kBAAlCC,mCAAkC,kDAAxC,CAMP,MAAO,IAAMC,YAAW,2FAAG,+JACnBjE,QAAO,CAACqB,IAAD,CADY,yDAAH,kBAAX4C,YAAW,2CAAjB,CAIP,MAAO,IAAMC,2BAA0B,CAAG,QAA7BA,2BAA6B,CAACC,QAAD,QACxClE,mBAAkB,CAACoB,IAAD,CAAO8C,QAAP,CADsB,EAAnC"},"metadata":{},"sourceType":"module"}